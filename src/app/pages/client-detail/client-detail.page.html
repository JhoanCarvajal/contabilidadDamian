<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/client-list"></ion-back-button>
    </ion-buttons>
    <ion-title>Detalle del cliente</ion-title>
    <ion-buttons slot="end">
      <ion-button>
        <ion-icon name="bookmark-outline"></ion-icon>
      </ion-button>
      <ion-button>
        <ion-icon name="ellipsis-vertical"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content #content [fullscreen]="true" [scrollEvents]="true" *ngIf="cliente" (ionScroll)="onScroll()">
  <div class="perfil-container">
    <!-- Avatar del cliente -->
    <div class="avatar-container">
      <ion-avatar class="avatar-cliente">
        <div class="avatar-inicial">{{ cliente.imagenPerfil }}</div>
      </ion-avatar>
    </div>
    
    <!-- Nombre del cliente -->
    <h1 class="nombre-cliente">{{ cliente.nombre }}</h1>
    
    <!-- Saldo del cliente -->
    <div class="saldo-container">
      <div class="saldo-valor">
        {{ formatearMoneda(cliente.saldo) }}
      </div>
    </div>
  </div>

  <!-- Información de contacto -->
  <ion-card class="info-card">
    <ion-card-header>
      <ion-card-title>Información de contacto</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngIf="cliente.telefono">
          <ion-icon name="call-outline" slot="start"></ion-icon>
          <ion-label>{{ cliente.telefono }}</ion-label>
          <ion-button fill="clear" slot="end" (click)="abrirRedSocial('whatsapp', cliente.telefono!)">
            <ion-icon name="logo-whatsapp"></ion-icon>
          </ion-button>
        </ion-item>
        
        <ion-item *ngIf="cliente.email">
          <ion-icon name="mail-outline" slot="start"></ion-icon>
          <ion-label>{{ cliente.email }}</ion-label>
        </ion-item>
        
        <ion-item *ngIf="cliente.direccion">
          <ion-icon name="location-outline" slot="start"></ion-icon>
          <ion-label>{{ cliente.direccion }}</ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Redes sociales -->
  <ion-card class="redes-card" *ngIf="cliente.redesSociales">
    <ion-card-header>
      <ion-card-title>Redes sociales</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngIf="cliente.redesSociales.instagram" (click)="abrirRedSocial('instagram', cliente.redesSociales.instagram!)">
          <ion-icon name="logo-instagram" slot="start" class="icon-instagram"></ion-icon>
          <ion-label>Instagram</ion-label>
          <ion-label slot="end">{{ cliente.redesSociales.instagram }}</ion-label>
        </ion-item>
        
        <ion-item *ngIf="cliente.redesSociales.whatsapp" (click)="abrirRedSocial('whatsapp', cliente.redesSociales.whatsapp!)">
          <ion-icon name="logo-whatsapp" slot="start" class="icon-whatsapp"></ion-icon>
          <ion-label>WhatsApp</ion-label>
          <ion-label slot="end">{{ cliente.redesSociales.whatsapp }}</ion-label>
        </ion-item>
        
        <ion-item *ngIf="cliente.redesSociales.facebook" (click)="abrirRedSocial('facebook', cliente.redesSociales.facebook!)">
          <ion-icon name="logo-facebook" slot="start" class="icon-facebook"></ion-icon>
          <ion-label>Facebook</ion-label>
          <ion-label slot="end">{{ cliente.redesSociales.facebook }}</ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
  
  <!-- Espacio adicional al final para efecto de resistencia -->
  <div class="padding-bottom"></div>
</ion-content>

<!-- Mensaje si no se encuentra el cliente -->
<ion-content [fullscreen]="true" *ngIf="!cliente">
  <div class="no-cliente">
    <ion-icon name="person-outline" class="icon-no-cliente"></ion-icon>
    <h2>Cliente no encontrado</h2>
    <p>El cliente que buscas no existe o ha sido eliminado.</p>
    <ion-button routerLink="/client-list">
      <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
      Volver al listado
    </ion-button>
  </div>
</ion-content>
